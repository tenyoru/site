{{ define "main" }}
<div class="section shell--narrow">
  <header class="section-header">
    <div class="section-header__top">
      <h1 class="section-header__title">{{ .Title }}</h1>
      <a href="{{ .Permalink }}index.xml" class="section-header__rss" title="RSS Feed">{{- partial "svg" "rss" -}}</a>
    </div>
    {{ with .Content }}
    <p class="section-header__desc">{{ . | plainify }}</p>
    {{ end }}
  </header>

  {{- $pages := .RegularPages.GroupByDate "2006" -}}
  {{- $showDrafts := or hugo.IsDevelopment .Site.BuildDrafts -}}

  {{- if gt (len $pages) 0 -}}
    <div class="post-archive">
      {{- range $pages -}}
        <section class="post-year">
          <h2 class="post-year__title">{{ .Key }}</h2>
          <ul class="post-list">
            {{- range .Pages -}}
              {{- if or $showDrafts (not .Draft) -}}
                {{ partial "post/card.html" (dict "page" .) }}
              {{- end -}}
            {{- end -}}
          </ul>
        </section>
      {{- end -}}
    </div>
  {{- else -}}
    <p class="post-empty">No posts yet.</p>
  {{- end -}}
</div>
{{ end }}
