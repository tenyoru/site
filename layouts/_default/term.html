{{ define "main" }}
<div class="section shell--narrow">
  <header class="section-header">
    <p class="section-header__label">tag</p>
    <h1 class="section-header__title">{{ .Title }}</h1>
  </header>

  {{- $pages := sort .Pages "Date" "desc" -}}
  {{- $showDrafts := or hugo.IsDevelopment .Site.BuildDrafts -}}

  {{- if $showDrafts -}}
    {{ if gt (len $pages) 0 }}
      <ul class="post-list">
        {{ range $pages }}
        {{ partial "post/card.html" (dict "page" .) }}
        {{ end }}
      </ul>
    {{ else }}
      <p class="post-empty">No posts for this tag yet.</p>
    {{ end }}
  {{- else -}}
    {{- $published := where $pages "Draft" false -}}
    {{- if gt (len $published) 0 -}}
      {{- $paginator := .Paginate $published -}}
      <ul class="post-list">
        {{ range $paginator.Pages }}
        {{ partial "post/card.html" (dict "page" .) }}
        {{ end }}
      </ul>

      {{ if gt $paginator.TotalPages 1 }}
      <nav class="pagination" aria-label="Pagination">
        {{ if $paginator.HasPrev }}
        <a href="{{ $paginator.Prev.URL }}" class="pagination__link">Previous</a>
        {{ end }}
        <span class="pagination__info">{{ $paginator.PageNumber }} / {{ $paginator.TotalPages }}</span>
        {{ if $paginator.HasNext }}
        <a href="{{ $paginator.Next.URL }}" class="pagination__link">Next</a>
        {{ end }}
      </nav>
      {{ end }}
    {{- else -}}
      <p class="post-empty">No posts for this tag yet.</p>
    {{- end -}}
  {{- end -}}

  <div class="tag-back">
    <a href="{{ "/tags/" | relLangURL }}" class="tag-back__link">‚Üê All tags</a>
  </div>
</div>
{{ end }}
