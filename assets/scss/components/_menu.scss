@use "theme" as *;
@use "vars" as v;

@supports selector(:has(*)) {
  @media (max-width: v.mq(sm)) {
    html:has(.menu-mobile[open]) { overflow: hidden; }
    .site-header-outer:has(.menu-mobile[open]) { backdrop-filter: none; background: theme(bg); }
  }
}

.site-header-outer { position: sticky; top: 0; z-index: 100; background: color-mix(in srgb, theme(bg) var(--header-opacity), transparent); backdrop-filter: blur(12px); border-bottom: 1px solid color-mix(in srgb, theme(border) 50%, transparent); }
.site-header { height: v.$header-height; box-sizing: border-box; justify-content: space-between; align-items: center; }
.header-left { display: flex; align-items: center; }

.site-title { margin: 0; font-size: 1rem; font-weight: 600; }
.site-title a { color: theme(text-heading); text-decoration: none; transition: color 0.15s ease; }
.site-title a:hover { color: theme(accent); }

.menu-desktop { display: flex; gap: 1.5rem; align-items: center; }
.menu-desktop a { color: theme(muted); text-decoration: none; font-size: 0.875rem; font-weight: 500; transition: color 0.15s ease; }
.menu-desktop a:hover, .menu-desktop a:focus-visible, .menu-desktop a.active { color: theme(text); outline: none; }

.menu-mobile { display: none; position: relative; z-index: 10000; }
.menu-toggle { cursor: pointer; list-style: none; user-select: none; display: inline-flex; align-items: center; justify-content: center; padding: 0.5rem; color: theme(text); }
.menu-toggle::-webkit-details-marker { display: none; }

.menu-icon { position: relative; display: inline-block; width: 1rem; height: 0.75rem; --burger-gap: 0.25rem; }
.menu-line { position: absolute; inset-inline-start: 0; top: 50%; width: 100%; height: 1px; background-color: currentColor; transition: transform 0.15s ease, opacity 0.15s ease; }
.menu-line:nth-child(1) { transform: translateY(calc(-50% - var(--burger-gap))); }
.menu-line:nth-child(2) { transform: translateY(-50%); }
.menu-line:nth-child(3) { transform: translateY(calc(-50% + var(--burger-gap))); }
.menu-mobile[open] .menu-line:nth-child(1) { transform: translateY(-50%) rotate(45deg); }
.menu-mobile[open] .menu-line:nth-child(2) { opacity: 0; }
.menu-mobile[open] .menu-line:nth-child(3) { transform: translateY(-50%) rotate(-45deg); }

.menu-panel { position: fixed; top: v.$header-height; left: 0; width: 100vw; height: calc(100vh - v.$header-height); z-index: 9999; display: none; background: color-mix(in srgb, theme(bg) 90%, transparent); backdrop-filter: blur(12px); border-top: 1px solid theme(border); }
.menu-mobile[open] .menu-panel { display: flex; align-items: center; justify-content: center; }

.menu-list { display: flex; flex-direction: column; align-items: center; gap: 0.5rem; }
.menu-list a { display: flex; align-items: baseline; gap: 0.5rem; font-size: 1.1rem; font-weight: 500; text-decoration: none; color: theme(muted); padding: 0.5rem 0; transition: color 0.15s ease; }
.menu-list__num { font-size: 0.65rem; font-weight: 400; color: theme(muted); font-variant-numeric: tabular-nums; letter-spacing: 0.05em; opacity: 0.6; transition: color 0.15s ease, opacity 0.15s ease; }
.menu-list a:hover .menu-list__num, .menu-list a.active .menu-list__num { opacity: 1; }
.menu-list a:hover, .menu-list a:focus-visible { color: theme(accent); outline: none; }
.menu-list a.active { color: theme(text); }

@media (max-width: v.mq(sm)) { .menu-desktop { display: none; } .menu-mobile { display: block; } }
