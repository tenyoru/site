@use "sass:math";
@use "../theme" as *;
@use "../vars" as v;

$rings: 7;
$ring-scale-max: 1;
$ring-scale-min: 0.3;
$ring-scale-step: math.div($ring-scale-max - $ring-scale-min, $rings - 1);

$ring-color: theme(ring-border);
$ring-size-min: 260px;
$ring-size-max: 65rem;

.rings {
  aspect-ratio: 1;
  transform: rotateX(68deg);
  filter: brightness(0.85);

  --rings-border-base: clamp(3px, 0.8vw, 14px);

  // Поднимаем кольца выше
  margin-top: clamp(-550px, -55vh, -200px);

  // Уменьшаем отступ снизу для компенсации перспективы
  margin-bottom: clamp(-200px, -20vh, -100px);

  @for $i from 1 through $rings {
    $scale: $ring-scale-max - (($i - 1) * $ring-scale-step);

    .ring-#{$i} {
      position: absolute;
      inset: 0;
      border: calc(var(--rings-border-base) / #{$scale}) solid $ring-color;
      border-radius: 50%;
      transform: scale($scale);
      transform-origin: center;
      // z-index: $rings - $i;
    }
  }
}



// ============================================
// HERO COMPOSITION - обёртка для балерины и колец
// ============================================

.hero-composition {
  position: relative;

  // Общий размер для синхронизации балерины и колец
  --base-size: clamp(260px, min(100vw - 2rem, 100vh - v.$header-height - 4rem), 65rem);

  // Размер композиции = размер колец
  width: var(--base-size);
  height: var(--base-size);

  // Центрируем композицию
  display: grid;
  place-items: center;
}

// ============================================
// BALLERINA
// ============================================

.hero-scene__figure {
  // z-index: 10;

  // Центрируем балерину
  display: flex;
  justify-content: center;
  align-items: center;

  // Высота балерины привязана к базовому размеру
  // SVG балерины имеет соотношение 408:612 (2:3)
  // Делаем балерину чуть меньше, чтобы она помещалась в композицию
  // height: calc(var(--base-size) * 0.95);
  max-height: 100%;

  // pointer-events: none;
}

.ballerina-icon {
  display: block;
  height: 100%;
  width: auto;

  // Цвет из темы
  color: theme(accent);
  fill: currentColor;

  // Убираем любой фон
  background: transparent;
}

// ============================================
// RESPONSIVE
// ============================================
//
// Адаптивность достигается через CSS переменную --base-size
// в .hero-composition, которая автоматически масштабирует
// и балерину, и кольца пропорционально.
// Дополнительные media queries не требуются!
